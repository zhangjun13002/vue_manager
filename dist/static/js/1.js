webpackJsonp([1],{"85kr":function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"roles.vue",sourceRoot:""}])},TssW:function(e,t,n){"use strict";var a=n("mvHQ"),s=n.n(a),o=n("Av7u");n.n(o);t.a={data:function(){return{data1:[],columns1:[{type:"selection",width:40,align:"center"},{title:"ID",key:"id",width:40,align:"center"},{title:"角色",key:"name",align:"center"},{title:"说明",key:"desc"}],modal1:!1,loading:!0,m1_id:0,m1_role:"",m1_desc:"",msg:"",idcheck:!1,rolecheck:!1}},methods:{idchange:function(e){var t=this;t.idcheck=t.data1.every(function(t){return t.id!==e}),t.rolecheck&&t.idcheck?t.loading=!1:t.loading=!0},rolechange:function(){var e=this;e.rolecheck=e.data1.every(function(t){return t.name!==e.m1_role}),e.rolecheck&&e.idcheck?e.loading=!1:e.loading=!0},addRole:function(){var e=this;if(e.rolecheck&&e.idcheck){var t=new Object;t.id=e.m1_id,t.name=e.m1_role,t.desc=e.m1_desc,e.saveRoles(t,"insert"),e.data1.push(t),e.m1_id=0,e.m1_role="",e.m1_desc="",e.idcheck=!1,e.rolecheck=!1,e.loading=!1,e.msg=""}else e.msg="输入不正确",e.loading=!0},addCancel:function(){var e=this;e.m1_id=0,e.m1_role="",e.m1_desc="",e.msg=""},delRole:function(){var e=this,t={};t.id=e.m1_id,e.saveRoles(t,"delete"),e.data1=e.data1.filter(function(t){return t.id!=e.m1_id}),e.m1_id=0,e.m1_role="",e.m1_desc=""},saveRoles:function(e,t){var n=this,a=this,o=new Object;o.data=s()(e),o.method=t,a.$http.post("/user/saverole",o).then(function(e){return n.$store.dispatch("SetRoleslist"),e.status},function(e){return e.status})},getRoles:function(){var e=this;this.$store.dispatch("SetRoleslist").then(function(t){e.data1=e.$store.getters.roleslist})},getSelKey:function(e,t){var n=this;n.msg="",n.m1_id=t.id,n.m1_role=t.role,n.m1_desc=t.desc}},mounted:function(){this.getRoles()}}},"d/JJ":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"layout-right-header"},[n("Breadcrumb",[n("Breadcrumb-item",[e._v(" 系统管理 ")]),e._v(" "),n("Breadcrumb-item",[e._v(" 角色管理 ")])],1)],1),e._v(" "),n("div",{staticClass:"layout-right-content"},[n("div",{staticClass:"content-main"},[n("div",{staticClass:"main-title"},[n("h2",[n("Icon",{attrs:{type:"android-people"}}),e._v("角色列表")],1)]),e._v(" "),n("div",{staticClass:"split"}),e._v(" "),n("Row",[n("Col",{attrs:{span:"24"}},[n("Button",{attrs:{type:"primary",size:"small"},on:{click:e.getRoles}},[e._v("刷新")]),e._v(" "),n("Button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.modal1=!0}}},[e._v("添加")]),e._v(" "),n("Modal",{attrs:{title:"添加角色",loading:e.loading,"mask-closable":!1},on:{"on-ok":e.addRole,"on-cancel":e.addCancel},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[n("Row",[n("Col",{attrs:{span:"2"}},[e._v("\n                                ID:\n                              ")]),e._v(" "),n("Col",{attrs:{span:"22"}},[n("InputNumber",{attrs:{max:100,min:1},on:{"on-change":e.idchange},model:{value:e.m1_id,callback:function(t){e.m1_id=t},expression:"m1_id"}})],1)],1),e._v(" "),n("br"),e._v(" "),n("Row",[n("Col",{attrs:{span:"2"}},[e._v("\n                                角色: \n                              ")]),e._v(" "),n("Col",{attrs:{span:"22"}},[n("Input",{on:{"on-change":e.rolechange},model:{value:e.m1_role,callback:function(t){e.m1_role=t},expression:"m1_role"}})],1)],1),e._v(" "),n("br"),e._v(" "),n("Row",[n("Col",{attrs:{span:"2"}},[e._v("\n                                说明: \n                              ")]),e._v(" "),n("Col",{attrs:{span:"22"}},[n("Input",{attrs:{type:"textarea"},model:{value:e.m1_desc,callback:function(t){e.m1_desc=t},expression:"m1_desc"}})],1)],1),e._v(" "),n("Row",[n("Col",{attrs:{span:"22",offset:"2"}},[e._v("\n                                  "+e._s(e.msg)+"                                  \n                                ")])],1)],1),e._v(" "),n("Button",{attrs:{type:"warning",size:"small"},on:{click:e.delRole}},[e._v("删除")])],1)],1),e._v(" "),n("br"),e._v(" "),n("Row",{attrs:{type:"flex"}},[n("Col",{attrs:{span:"24"}},[n("Table",{ref:"selection",attrs:{border:"",draggable:"",stripe:"",size:"small","highlight-row":"",columns:e.columns1,data:e.data1},on:{"on-select":e.getSelKey}})],1)],1)],1)])])},s=[],o={render:a,staticRenderFns:s};t.a=o},gb7e:function(e,t,n){var a=n("85kr");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("eb15b614",a,!0)},"m+R4":function(e,t,n){"use strict";function a(e){n("gb7e")}Object.defineProperty(t,"__esModule",{value:!0});var s=n("TssW"),o=n("d/JJ"),i=n("VU/8"),l=a,r=i(s.a,o.a,!1,l,null,null);t.default=r.exports},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(e,t,n){var a=n("FeBl"),s=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}}});